(this["webpackJsonpqunabu-react-test"]=this["webpackJsonpqunabu-react-test"]||[]).push([[0],{17:function(e,t,a){e.exports=a(36)},29:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),s=a.n(c),l=a(3),i=(a(26),a(15)),o=a.n(i),u=a(5),p=a(16);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={perPage:20,pages:0,byId:{}},b={byId:{}},E=Object(u.b)({episodes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_EPISODES_SUCCESS":var a=e.byId;return t.payload.results.forEach((function(e){a[e.id]=e})),e.pages=t.payload.info.pages,e.byId=a,m({},e);default:return e}},characters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CHARACTERS_SUCCESS":var a=e.byId;return t.payload.forEach((function(e){a[e.id]=e})),{byId:a};default:return e}}}),h=Object(u.c)(E,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),O=(a(29),function(e){var t=e.title,a=e.subtitle;return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header__body"},r.a.createElement("h1",{className:"header__title"},t),r.a.createElement("span",{className:"header__credits"},a)))});O.defaultProps={title:"",subtitle:""};var v=O,g=a(4),y=a.n(g),_=a(6),j=a(7),C={baseURL:"https://rickandmortyapi.com/api",get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="?";for(var n in t)a+="".concat(n,"=").concat(t[n],"&");return fetch("".concat(C.baseURL).concat(e).concat(a))}},N=C,k=(a(31),function(e){var t=e.children,a=e.open,c=e.onChange,s=e.title,l=e.className,i=Object(n.useState)(a),o=Object(j.a)(i,2),u=o[0],p=o[1];Object(n.useEffect)((function(){p(a)}),[a]);var d=Object(n.useCallback)((function(){p(!u),c(!u)}),[u,c]);return r.a.createElement("div",{className:"collapse ".concat(u&&"collapse--open")},r.a.createElement("div",{className:"collapse__head",onClick:d},s,r.a.createElement("button",{className:"collapse__button"},u?"-":"+")),r.a.createElement("div",{className:"collapse__body ".concat(l)},t))});k.defaultProps={open:!1,onChange:function(){},title:"",className:""};var S=k,w=a(1),P=a.n(w),I=(a(32),function(e){var t=e.id,a=e.characters.byId[t]||{},n=a.name,c=a.image;return r.a.createElement("div",{className:"character"},r.a.createElement("img",{src:c,alt:n,className:"character__image"}),r.a.createElement("div",{className:"character__name"},n||"[ID: ".concat(t,"]")))});I.defaultProps={id:0};var x=Object(l.b)((function(e){return{characters:e.characters}}))(I),D={list:P.a.arrayOf(P.a.oneOfType([P.a.string,P.a.number]))},T=r.a.memo((function(e){return e.list.map((function(e){return r.a.createElement(x,{key:e,id:e})}))}));T.propTypes=D,T.defaultProps={list:[]};var R=T,U=function(e){var t=e.split("/");return t[t.length-1]},A=function(e){return{type:"FETCH_CHARACTERS_SUCCESS",payload:e}},H=(a(33),function(e){var t=e.episode,a=e.open,c=e.onOpenChange,s=e.dispatch,l=e.characters,i=t.id,o=t.name,u=t.air_date,p=Object(n.useMemo)((function(){return t.characters.map((function(e){return U(e)}))}),[t.characters]),d=Object(n.useCallback)((function(e){(c(e),e)&&function(){var e=Object(_.a)(y.a.mark((function e(){var t,a,n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object.keys(l.byId),0!==(a=p.filter((function(e){return-1===t.indexOf(e)}))).length){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,N.get("/character/".concat(a.join(",")));case 6:return n=e.sent,e.next=9,n.json();case 9:r=e.sent,s(A(r));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[l,p,c]);return r.a.createElement(S,{title:"Episode ".concat(i),open:a,onChange:d,className:"episode"},r.a.createElement("ul",{className:"episode__properties"},r.a.createElement("li",null,r.a.createElement("strong",null,"ID")," ",r.a.createElement("span",null,i)),r.a.createElement("li",null,r.a.createElement("strong",null,"Name")," ",r.a.createElement("span",null,o)),r.a.createElement("li",null,r.a.createElement("strong",null,"Air date")," ",r.a.createElement("span",null,u)),r.a.createElement("li",null,r.a.createElement("strong",null,"Episode")," ",r.a.createElement("span",null,t.episode)),r.a.createElement("li",null,r.a.createElement("strong",null,"Characters"))),r.a.createElement("div",{className:"episode__characters"},r.a.createElement(R,{list:p})))});H.defaultProps={episode:{id:null,name:"",air_date:"",characters:[]},open:!1,onOpenChange:function(){}};var F=Object(l.b)((function(e){return{characters:e.characters}}))(H),L=function(e){return{type:"FETCH_EPISODES_SUCCESS",payload:e}},M=(a(34),Object(l.b)((function(e){return{episodes:e.episodes,characters:e.characters}}))((function(e){var t=e.episodes,a=e.characters,c=e.dispatch,s=Object(n.useState)(!1),l=Object(j.a)(s,2),i=l[0],o=l[1],u=Object(n.useState)(1),p=Object(j.a)(u,2),d=p[0],m=p[1],f=Object(n.useMemo)((function(){return Object.values(t.byId).slice((d-1)*t.perPage,d*t.perPage)}),[t,d]);Object(n.useEffect)((function(){Object.keys(t.byId).length>(d-1)*t.perPage||function(){var e=Object(_.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/episode",{page:d});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,c(L(a));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[d]);var b=Object(n.useCallback)(Object(_.a)(y.a.mark((function e(){var t,n,r,s,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(t=!i),!t){e.next=14;break}if(n=Object.keys(a.byId),0!==(r=f.map((function(e){return e.characters})).flat().map((function(e){return U(e)})).filter((function(e){return-1===n.indexOf(e)}))).length){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,N.get("/character/".concat(r.join(",")));case 9:return s=e.sent,e.next=12,s.json();case 12:l=e.sent,c(A(l));case 14:case"end":return e.stop()}}),e)}))),[i,a,f]);return r.a.createElement("div",{className:"episodes-list"},r.a.createElement("h2",{className:"episodes-list__title"},"All Episodes:",r.a.createElement("span",{className:"link",onClick:b},i?"collapse all":"show all")),r.a.createElement("div",{className:"episodes-list__episodes"},f.map((function(e){return r.a.createElement(F,{key:e.id,episode:e,open:i,onOpenChange:function(){}})}))),r.a.createElement("div",{className:"episodes-list__pagination"},r.a.createElement("span",{className:"link ".concat(1===d&&"link--disabled"),onClick:function(){return m(d-1)}},"prev page")," |",r.a.createElement("span",{className:"link ".concat(d===t.pages&&"link--disabled"),onClick:function(){return m(d+1)}},"next page")))}))),X=(a(35),function(){return r.a.createElement("div",null,r.a.createElement(v,{title:"Rick and Morty app",subtitle:"Created by Artur M\u0119dryga\u0142"}),r.a.createElement("main",{className:"container"},r.a.createElement(M,null)))});o.a.polyfill(),s.a.render(r.a.createElement(l.a,{store:h},r.a.createElement(X,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.6f27afc3.chunk.js.map