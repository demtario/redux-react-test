(this["webpackJsonpqunabu-react-test"]=this["webpackJsonpqunabu-react-test"]||[]).push([[0],{15:function(e,t,a){e.exports=a(32)},25:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),s=a.n(c),l=a(2),o=a(4),i=a(14);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={perPage:20,pages:0,byId:{}},m={byId:{}},E=Object(o.b)({episodes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_EPISODES_SUCCESS":var a=e.byId;return t.payload.results.forEach((function(e){a[e.id]=e})),e.pages=t.payload.info.pages,e.byId=a,p({},e);default:return e}},characters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CHARACTERS_SUCCESS":var a=e.byId;return t.payload.forEach((function(e){a[e.id]=e})),{byId:a};default:return e}}}),f=Object(o.c)(E,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),b=(a(25),function(){return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header__body"},r.a.createElement("h1",{className:"header__title"},"Rick and Morty app"),r.a.createElement("span",{className:"header__credits"},"Created by Artur M\u0119dryga\u0142")))}),h=a(5),_=a.n(h),O=a(8),g=a(6),v={baseURL:"https://rickandmortyapi.com/api",get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="?";for(var n in t)a+="".concat(n,"=").concat(t[n],"&");return fetch("".concat(v.baseURL).concat(e).concat(a))}},y=v,j=(a(27),function(e){var t=e.children,a=e.open,c=e.onChange,s=e.title,l=e.className,o=Object(n.useState)(a),i=Object(g.a)(o,2),u=i[0],p=i[1];Object(n.useEffect)((function(){p(a)}),[a]);var d=Object(n.useCallback)((function(){p(!u),c(!u)}),[u,c]);return r.a.createElement("div",{className:"collapse ".concat(u&&"collapse--open")},r.a.createElement("div",{className:"collapse__head",onClick:d},s,r.a.createElement("button",{className:"collapse__button"},u?"A":"V")),r.a.createElement("div",{className:"collapse__body ".concat(l)},t))}),N=(a(28),Object(l.b)((function(e){return{characters:e.characters}}))((function(e){var t=e.id,a=e.characters.byId[t]||{},n=a.name,c=a.image;return r.a.createElement("div",{className:"character"},r.a.createElement("img",{src:c,alt:n,className:"character__image"}),r.a.createElement("div",{className:"character__name"},n||"[ID: ".concat(t,"]")))}))),C=function(e){return{type:"FETCH_CHARACTERS_SUCCESS",payload:e}},S=(a(29),Object(l.b)((function(){return{}}))((function(e){var t=e.episode,a=e.open,c=e.onOpenChange,s=e.dispatch,l=t.id,o=t.name,i=t.air_date,u=Object(n.useMemo)((function(){return t.characters.map((function(e){return function(e){var t=e.split("/");return t[t.length-1]}(e)}))}),[t.characters]);return r.a.createElement(j,{title:"Episode ".concat(l),open:a,onChange:function(e){e&&(function(){var e=Object(O.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/character/".concat(u.join(",")));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,s(C(a));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),c(e))},className:"episode"},r.a.createElement("ul",{className:"episode__properties"},r.a.createElement("li",null,r.a.createElement("strong",null,"ID")," ",r.a.createElement("span",null,l)),r.a.createElement("li",null,r.a.createElement("strong",null,"Name")," ",r.a.createElement("span",null,o)),r.a.createElement("li",null,r.a.createElement("strong",null,"Air date")," ",r.a.createElement("span",null,i)),r.a.createElement("li",null,r.a.createElement("strong",null,"Episode")," ",r.a.createElement("span",null,t.episode)),r.a.createElement("li",null,r.a.createElement("strong",null,"Characters"))),r.a.createElement("div",{className:"episode__characters"},u&&u.map((function(e){return r.a.createElement(N,{key:e,id:e})}))))}))),k=function(e){return{type:"FETCH_EPISODES_SUCCESS",payload:e}},w=(a(30),Object(l.b)((function(e){return{episodes:e.episodes}}))((function(e){var t=e.episodes,a=e.dispatch,c=Object(n.useState)(!1),s=Object(g.a)(c,2),l=s[0],o=s[1],i=Object(n.useState)(1),u=Object(g.a)(i,2),p=u[0],d=u[1];Object(n.useEffect)((function(){Object.keys(t.byId).length>=p*t.perPage||function(){var e=Object(O.a)(_.a.mark((function e(){var t,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/episode",{page:p});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a(k(n));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[p]);var m=Object(n.useMemo)((function(){return Object.values(t.byId).slice((p-1)*t.perPage,p*t.perPage)}),[t,p]);return r.a.createElement("div",{className:"episodes-list"},r.a.createElement("h2",{className:"episodes-list__title"},"All Episodes:",r.a.createElement("span",{className:"link",onClick:function(){return o(!l)}},l?"collapse all":"show all")),r.a.createElement("div",{className:"episodes-list__episodes"},m&&m.map((function(e){return r.a.createElement(S,{key:e.id,episode:e,open:l,onOpenChange:function(){}})}))),r.a.createElement("div",{className:"episodes-list__pagination"},r.a.createElement("span",{className:"link ".concat(1===p&&"link--disabled"),onClick:function(){return d(p-1)}},"prev page")," |",r.a.createElement("span",{className:"link ".concat(p===t.pages&&"link--disabled"),onClick:function(){return d(p+1)}},"next page")))}))),I=(a(31),function(){return r.a.createElement("div",null,r.a.createElement(b,null),r.a.createElement("main",{className:"container"},r.a.createElement(w,null)))});s.a.render(r.a.createElement(l.a,{store:f},r.a.createElement(I,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.eeb84e5b.chunk.js.map